/*
* Kendo UI Complete v2012.1.322 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(a,b){var c=kendo.mobile,d=c.ui,e=a.proxy,f=kendo.Class,g=kendo.fx.Transition,h=kendo.ui.Pane,i=kendo.ui.PaneDimensions,j=d.Widget,k=Math,l=k.abs,m=k.ceil,n=k.round,o=k.max,p=k.min,q=k.floor,r="km-current-page",s=j.extend({init:function(b,c){var d=this;j.fn.init.call(d,b,c),b=d.element,b.wrapInner("<div/>").addClass("km-scrollview").append('<ol class="km-pages"/>'),d.inner=b.children().first(),d.pager=b.children().last(),d.page=0;var f,k,m,n,o,p;f=new kendo.ui.Movable(d.inner),k=new g({axis:"x",movable:f,onEnd:function(){d.page=Math.round(-f.x/o.size),d._updatePage()}}),m=new kendo.Drag(b,{start:function(){l(m.x.velocity)*2>=l(m.y.velocity)?m.capture():m.cancel(),k.cancel()},end:a.proxy(d._dragEnd,d)}),n=new i({element:d.inner,container:d.element}),o=n.x,o.bind("change",e(d.refresh,d)),p=new h({dimensions:n,drag:m,movable:f,elastic:!0}),a.extend(d,{movable:f,transition:k,drag:m,dimensions:n,dimension:o,pane:p}),d.page=d.options.page,n.refresh()},options:{name:"ScrollView",page:0,duration:300,velocityThreshold:.8,bounceVelocityThreshold:1.6},viewShow:function(a){this.dimensions.refresh()},refresh:function(){var a=this,b="",c=a.dimension,d=c.size,e;a.element.find("[data-role=page]").width(d),a.scrollTo(a.page),e=a.pages=m(c.totalSize()/d),a.minSnap=-(e-1)*d,a.maxSnap=0;for(var f=0;f<e;f++)b+="<li/>";a.pager.html(b),a._updatePage()},scrollTo:function(a){this._moveTo(-a*this.dimension.size,g.easeOutExpo)},_moveTo:function(a,b){this.transition.moveTo({location:a,duration:this.options.duration,ease:b})},_dragEnd:function(a){var b=this,c=a.x.velocity,d=b.dimension.size,e=b.options,f=e.velocityThreshold,h,i=n,j=g.easeOutExpo;c>f?i=m:c<-f&&(i=q),l(c)>e.bounceVelocityThreshold&&(j=g.easeOutBack),h=o(b.minSnap,p(i(b.movable.x/d)*d,b.maxSnap)),this._moveTo(h,j)},_updatePage:function(){var a=this,b=a.pager;b.children().removeClass(r),b.find(":nth-child("+(a.page+1)+")").addClass(r)}});d.plugin(s)})(jQuery)