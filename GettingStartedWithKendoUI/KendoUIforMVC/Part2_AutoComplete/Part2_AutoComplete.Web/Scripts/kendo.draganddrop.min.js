/*
* Kendo UI Complete v2012.2.531 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
;(function(a,b){function L(b){b.preventDefault(),a(f.body).trigger(b.type)}function K(a,b){return a.replace(/ /g,b+" ")}function J(a){return f.elementFromPoint(a.x.client,a.y.client)}function I(b,c){try{return a.contains(b,c)||b==c}catch(d){return!1}}var c=window.kendo,d=c.support,e=d.pointers,f=window.document,g=a(f.documentElement),h=c.Class,i=c.ui.Widget,j=c.Observable,k=a.proxy,l=a.extend,m=c.getOffset,n={},o={},p,q=d.mobileOS&&d.mobileOS.android,r="mousedown",s="mousemove",t="mouseup mouseleave",u="keyup",v="change",w="dragstart",x="drag",y="dragend",z="dragcancel",A="dragenter",B="dragleave",C="drop",D="start",E="move",F="end",G="cancel",H="tap";d.touch&&(r="touchstart",s="touchmove",t="touchend touchcancel"),e&&(r="MSPointerDown",s="MSPointerMove",t="MSPointerUp MSPointerCancel");var M=h.extend({init:function(a){this.axis=a},start:function(a,b){var c=this,d=a["page"+c.axis];c.startLocation=c.location=d,c.client=a["client"+c.axis],c.velocity=c.delta=0,c.timeStamp=b},move:function(a,b){var c=this,d=a["page"+c.axis];if(!!d||!q)c.delta=d-c.location,c.location=d,c.client=a["client"+c.axis],c.initialDelta=d-c.startLocation,c.velocity=c.delta/(b-c.timeStamp),c.timeStamp=b}}),N=j.extend({init:function(b,e){var f=this,h={},i,m,n="."+c.guid();e=e||{},i=f.filter=e.filter,f.threshold=e.threshold||0,b=a(b),j.fn.init.call(f),h={},h[K(s,n)]=k(f._move,f),h[K(t,n)]=k(f._end,f),l(f,{x:new M("X"),y:new M("Y"),element:b,surface:e.global?g:e.surface||b,stopPropagation:e.stopPropagation,pressed:!1,eventMap:h,ns:n}),b.on(r,i,k(f._start,f)).on("dragstart",i,c.preventDefault);if(!e.allowSelection){var o=["mousedown selectstart",i,L];i instanceof a&&o.splice(2,0,null),b.on.apply(b,o)}d.eventCapture&&(m=function(a){f.moved&&a.preventDefault()},f.surface[0].addEventListener(d.mouseup,m,!0)),f.bind([H,D,E,F,G],e)},capture:function(){N.captured=!0},cancel:function(){this._cancel(),this.trigger(G)},skip:function(){this._cancel()},_cancel:function(){var a=this;a.moved=a.pressed=!1,a.surface.off(a.ns)},_start:function(b){var c=this,f=c.filter,g=b.originalEvent,h,i=b;if(!c.pressed){f?c.target=a(b.target).is(f)?a(b.target):a(b.target).closest(f):c.target=c.element;if(!c.target.length)return;c.currentTarget=b.currentTarget,c.stopPropagation&&b.stopPropagation(),c.pressed=!0,c.moved=!1,c.startTime=null,d.touch&&(h=g.changedTouches[0],c.touchID=h.identifier,i=h),e&&(c.touchID=g.pointerId,i=g),c._perAxis(D,i,b.timeStamp),c.surface.off(c.eventMap).on(c.eventMap),N.captured=!1}},_move:function(a){var b=this,c,d,e;!b.pressed||b._withEvent(a,function(f){b._perAxis(E,f,a.timeStamp);if(!b.moved){c=b.x.initialDelta,d=b.y.initialDelta,e=Math.sqrt(c*c+d*d);if(e<=b.threshold)return;if(!N.captured)b.startTime=a.timeStamp,b._trigger(D,a),b.moved=!0;else return b._cancel()}b.pressed&&b._trigger(E,a)})},_end:function(a){var b=this;!b.pressed||b._withEvent(a,function(){b.moved?(b.endTime=a.timeStamp,b._trigger(F,a),b.moved=!1):b._trigger(H,a),b._cancel()})},_perAxis:function(a,b,c){this.x[a](b,c),this.y[a](b,c)},_trigger:function(a,b){var c={x:this.x,y:this.y,target:this.target,event:b};this.trigger(a,c)&&b.preventDefault()},_withEvent:function(a,b){var c=this,f=c.touchID,g=a.originalEvent,h,i;if(d.touch){h=g.changedTouches,i=h.length;while(i){i--;if(h[i].identifier===f)return b(h[i])}}else{if(!e)return b(a);if(f===g.pointerId)return b(g)}}}),O=j.extend({init:function(b,c){var d=this,e=b[0];d.capture=!1,e.addEventListener(r,k(d._press,d),!0),a.each(t.split(" "),function(){e.addEventListener(this,k(d._release,d),!0)}),j.fn.init.call(d),d.bind(["press","release"],c||{})},_press:function(a){var b=this;b.trigger("press"),b.capture&&a.preventDefault()},_release:function(a){var b=this;b.trigger("release"),b.capture&&(a.preventDefault(),b.cancelCapture())},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1}}),P=j.extend({init:function(b){var c=this;j.fn.init.call(c),a.extend(c,b),c.max=0,c.horizontal?(c.measure="width",c.scrollSize="scrollWidth",c.axis="x"):(c.measure="height",c.scrollSize="scrollHeight",c.axis="y")},outOfBounds:function(a){return a>this.max||a<this.min},present:function(){return this.max-this.min},getSize:function(){return this.container[this.measure]()},getTotal:function(){return this.element[0][this.scrollSize]},update:function(a){var b=this;b.size=b.getSize(),b.total=b.getTotal(),b.min=Math.min(b.max,b.size-b.total),a||b.trigger(v,b)}}),Q=j.extend({init:function(a){var b=this,d=k(b.refresh,b);j.fn.init.call(b),b.x=new P(l({horizontal:!0},a)),b.y=new P(l({horizontal:!1},a)),b.bind(v,a),c.onResize(d)},present:function(){return this.x.present()||this.y.present()},refresh:function(){this.x.update(),this.y.update(),this.trigger(v)}}),R=j.extend({init:function(a){var b=this;l(b,a),j.fn.init.call(b)},dragMove:function(a){var b=this,c=b.dimension,d=b.axis,e=b.movable,f=e[d]+a;if(!!c.present()){if(f<c.min&&a<0||f>c.max&&a>0)a*=b.resistance;e.translateAxis(d,a),b.trigger(v,b)}}}),S=h.extend({init:function(a){var b=this,c,d,e;l(b,{elastic:!0},a),e=b.elastic?.5:0,b.x=c=new R({axis:"x",dimension:b.dimensions.x,resistance:e,movable:b.movable}),b.y=d=new R({axis:"y",dimension:b.dimensions.y,resistance:e,movable:b.movable}),b.drag.bind(["move","end"],{move:function(a){c.dimension.present()||d.dimension.present()?(c.dragMove(a.x.delta),d.dragMove(a.y.delta),a.preventDefault()):b.drag.skip()},end:function(a){a.preventDefault()}})}}),T=d.transitions.prefix+"Transform",U=Math.round,V;d.hasHW3D?V=function(a,b){return"translate3d("+U(a)+"px,"+U(b)+"px,0)"}:V=function(a,b){return"translate("+U(a)+"px,"+U(b)+"px)"};var W=j.extend({init:function(b){var c=this;j.fn.init.call(c),c.element=a(b),c.x=0,c.y=0,c._saveCoordinates(V(c.x,c.y))},translateAxis:function(a,b){this[a]+=b,this.refresh()},translate:function(a){this.x+=a.x,this.y+=a.y,this.refresh()},moveAxis:function(a,b){this[a]=b,this.refresh()},moveTo:function(a){l(this,a),this.refresh()},refresh:function(){var a=this,b=V(a.x,a.y);b!=a.coordinates&&(a.element[0].style[T]=b,a._saveCoordinates(b),a.trigger(v))},_saveCoordinates:function(a){this.coordinates=a}}),X=i.extend({init:function(a,b){var c=this;i.fn.init.call(c,a,b);var d=c.options.group;d in o?o[d].push(c):o[d]=[c]},events:[A,B,C],options:{name:"DropTarget",group:"default"},_trigger:function(a,b){var c=this,d=n[c.options.group];if(d)return c.trigger(a,l({},b.event,{draggable:d}))},_over:function(a){this._trigger(A,a)},_out:function(a){this._trigger(B,a)},_drop:function(a){var b=this,c=n[b.options.group];c&&(c.dropped=!b._trigger(C,a))}}),Y=i.extend({init:function(a,b){var d=this;i.fn.init.call(d,a,b),d.drag=new N(d.element,{global:!0,stopPropagation:!0,filter:d.options.filter,threshold:d.options.distance,start:k(d._start,d),move:k(d._drag,d),end:k(d._end,d),cancel:k(d._cancel,d)}),d.destroy=k(d._destroy,d),d.captureEscape=function(a){a.keyCode===c.keys.ESC&&(d._trigger(z,{event:a}),d.drag.cancel())}},events:[w,x,y,z],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,dropped:!1},_start:function(b){var c=this,d=c.options,e=d.hint;c.currentTarget=c.drag.target,c.currentTargetOffset=m(c.currentTarget);if(e){c.hint=a.isFunction(e)?a(e(c.currentTarget)):e;var g=m(c.currentTarget);c.hintOffset=g,c.hint.css({position:"absolute",zIndex:2e4,left:g.x,top:g.y}).appendTo(f.body)}n[d.group]=c,c.dropped=!1,c._trigger(w,b)&&(c.drag.cancel(),c.destroy()),a(f).on(u,c.captureEscape)},updateHint:function(a){var b=this,c,d=b.options.cursorOffset;d?c={left:a.x.location+d.left,top:a.y.location+d.top}:(b.hintOffset.left+=a.x.delta,b.hintOffset.top+=a.y.delta,c=b.hintOffset),b.hint.css(c)},_drag:function(a){var b=this;a.preventDefault(),b._withDropTarget(a,function(b){if(!b)p&&(p._trigger(B,a),p=null);else{if(p){if(b.element[0]===p.element[0])return;p._trigger(B,a)}b._trigger(A,a),p=b}}),b._trigger(x,a),b.hint&&b.updateHint(a)},_end:function(a){var b=this;b._withDropTarget(a,function(b){b&&(b._drop(a),p=null)}),b._trigger(y,a),b._cancel(a.event)},_cancel:function(a){var b=this;b.hint&&!b.dropped?b.hint.animate(b.currentTargetOffset,"fast",b.destroy):b.destroy()},_trigger:function(a,b){var c=this;return c.trigger(a,l({},b.event,{x:b.x,y:b.y,currentTarget:c.currentTarget}))},_withDropTarget:function(a,b){var c=this,d,e,f,g=c.options,h=o[g.group],i=0,j=h&&h.length;if(j){d=J(a),c.hint&&I(c.hint,d)&&(c.hint.hide(),d=J(a),c.hint.show());outer:while(d){for(i=0;i<j;i++){e=h[i];if(e.element[0]===d){f=e;break outer}}d=d.parentNode}b(f)}},_destroy:function(){var b=this;b.hint&&b.hint.remove(),delete n[b.options.group],b.trigger("destroy"),a(f).off(u,b.captureEscape)}});c.ui.plugin(X),c.ui.plugin(Y),c.Drag=N,c.Tap=O,l(c.ui,{Pane:S,PaneDimensions:Q,Movable:W})})(jQuery);