/*
* Kendo UI Complete v2012.2.531 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
;(function(a,b){function G(a,b){if(a)return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate();return!1}function F(a){var b=c.culture().calendar.patterns;a.format=g(a.format||b.g),a.timeFormat=g(a.timeFormat||b.t),c.DateView.normalize(a),a.parseFormats.splice(1,0,a.timeFormat)}function E(a){a.preventDefault()}var c=window.kendo,d=c.TimeView,e=c.support.touch,f=c.parseDate,g=c._extractFormat,h=c.calendar.isInRange,i=d.getMilliseconds,j=c.ui,k=j.Widget,l="open",m="close",n="change",o=e?"touchend":"click",p="disabled",q="k-state-default",r="k-state-focused",s="k-state-hover",t="k-state-disabled",u="mouseenter mouseleave",v=e?"touchstart":"mousedown",w=o+" "+v,x="month",y="<span/>",z=Date,A=new z(1900,0,1),B=new z(2099,11,31),C=a.extend,D=k.extend({init:function(b,d){var f=this;k.fn.init.call(f,b,d),b=f.element,d=f.options,F(d),f._wrapper(),f._icons(),f._views(),e||(b[0].type="text"),b.addClass("k-input").bind({keydown:a.proxy(f._keydown,f),focus:function(){f._inputWrapper.addClass(r)},blur:function(){f._inputWrapper.removeClass(r),f._change(b.val()),f.close("date"),f.close("time")}}).closest("form").bind("reset",function(){f.value(b[0].defaultValue)}),f.enable(!b.is("[disabled]")),f.value(d.value||b.val()),c.notify(f)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",parseFormats:[],dates:[],min:new z(A),max:new z(B),interval:30,height:200,footer:'#= kendo.toString(data,"D") #',start:x,depth:x,animation:{},month:{}},events:[l,m,n],setOptions:function(a){var b=this;k.fn.setOptions.call(b,a),F(b.options),C(b.dateView.options,b.options),C(b.timeView.options,b.options),b.timeView.ul[0].innerHTML=""},enable:function(a){var b=this,c=b._dateIcon.unbind(w),d=b._timeIcon.unbind(w),f=b._inputWrapper.unbind(u),g=b.element;a===!1?(f.removeClass(q).addClass(t),g.attr(p,p)):(f.addClass(q).removeClass(t).bind(u,b._toggleHover),g.removeAttr(p),c.bind({click:function(){b.toggle("date"),!e&&g[0]!==document.activeElement&&g.focus()},mousedown:E}),d.bind({click:function(){b.toggle("time"),!e&&g[0]!==document.activeElement&&g.focus()},mousedown:E}))},close:function(a){a!=="time"&&(a="date"),this[a+"View"].close()},open:function(a){a!=="time"&&(a="date"),this[a+"View"].open()},min:function(a){return this._option("min",a)},max:function(a){return this._option("max",a)},toggle:function(a){var b="timeView";a!=="time"?a="date":b="dateView",this[a+"View"].toggle(),this[b].close()},value:function(a){var c=this;if(a===b)return c._value;c._old=c._update(a)},_change:function(a){var b=this;a=b._update(a),+b._old!=+a&&(b._old=a,b.trigger(n),b.element.trigger(n))},_option:function(a,c){var d=this,e=d.options;if(c===b)return e[a];c=f(c,e.parseFormats);!c||(e[a]=new z(c),d.dateView[a](c),d._setTime())},_setTime:function(){var a=this,b=a.timeView,c=b.options,d=a.options,e=d.min,f=d.max,g=d.dates,h=a._old,j=a._value,k,l;!h&&!j||a._timeSelected?a._timeSelected=!1:(G(j,e)?(c.min=e,l=!0):G(j,f)?(k=i(e)+i(f)===0,c.max=f,l=!0):h&&G(h,e)?(b.options.min=new z(A),l=!0):h&&G(h,f)&&(b.options.max=new z(B),l=!0),l&&(k?b.dataBind([A]):g&&g[0]?b.dataBind(g):b.refresh()))},_toggleHover:function(b){e||a(b.currentTarget).toggleClass(s,b.type==="mouseenter")},_update:function(a){var b=this,d=b.options,e=f(a,d.parseFormats);h(e,d.min,d.max)||(e=null),b._value=e,b.dateView.value(e),b.timeView.value(e),b._setTime(),b.element.val(e?c.toString(e,d.format):a);return e},_keydown:function(a){var b=this,d=b.dateView,e=b.timeView,f=d.popup.visible();a.altKey&&a.keyCode===c.keys.DOWN?b.toggle(f?"time":"date"):f?d.move(a):e.popup.visible()?e.move(a):a.keyCode===c.keys.ENTER&&b._change(b.element.val())},_views:function(){var a=this,b=a.options,e={view:"date"},f={view:"time"};a.dateView=new c.DateView(C({},b,{anchor:a.wrapper,change:function(){var c=this.value(),d=+c,e=+b.min,f=+b.max,g;if(d===e||d===f)g=new z(a._value),g.setFullYear(c.getFullYear()),g.setMonth(c.getMonth()),g.setDate(c.getDate()),h(g,e,f)&&(c=g);a._change(c),a.close("date")},close:function(b){a.trigger(m,e)&&b.preventDefault()},open:function(b){a.trigger(l,e)&&b.preventDefault()}})),a.timeView=new d({anchor:a.wrapper,animation:b.animation,dates:b.dates,format:b.timeFormat,height:b.height,interval:b.interval,min:new z(A),max:new z(B),parseFormats:b.parseFormats,value:b.value,change:function(d,e){d=a.timeView._parse(d),e?(a._timeSelected=!0,a._change(d)):a.element.val(c.toString(d,b.format))},close:function(b){a.trigger(m,f)&&b.preventDefault()},open:function(b){a.trigger(l,f)&&b.preventDefault()}})},_icons:function(){var b=this,c=b.element,d;d=c.next("span.k-select"),d[0]||(d=a('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-icon-calendar">select</span><span unselectable="on" class="k-icon k-icon-clock">select</span></span>').insertAfter(c),d=d.children()),b._dateIcon=d.eq(0),b._timeIcon=d.eq(1)},_wrapper:function(){var b=this,c=b.element,d;d=c.parents(".k-datetimepicker"),d[0]||(d=c.wrap(y).parent().addClass("k-picker-wrap k-state-default"),d=d.wrap(y).parent()),d[0].style.cssText=c[0].style.cssText,c.css({width:"100%",height:c[0].style.height}),b.wrapper=d.addClass("k-widget k-datetimepicker k-header"),b._inputWrapper=a(d[0].firstChild)}});j.plugin(D)})(jQuery);